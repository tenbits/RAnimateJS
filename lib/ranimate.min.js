include.js({framework:"ruqq.base"}).done(function(){"use strict";var e=window,t=ruqq,n=t.info.cssprefix,r=t.info.prefix,i=function(){var e=document.createElement("fakeelement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},n=null;for(var r in t)if(e.style[r]!==undefined){n=t[r];break}return i=function(){return n},e=null,t=null,i()},s={prop:n+"transition-property",duration:n+"transition-duration",timing:n+"transition-timing-function",delay:n+"transition-delay"},o=function(e,t,r,i,s,o,u){var a=typeof t=="string"?{property:t,valueFrom:o,valueTo:r,duration:i,timing:u,callback:s}:t,f=$(e);a.timing==null&&(a.timing="linear"),a.duration==null&&(a.duration=300);if(a.valueFrom!=null){var l={};l[a.property]=a.valueFrom,l[n+"transition-property"]="none",l[n+"transition-duration"]="0ms",f.css(l)}return setTimeout(function(){var t={};t[a.property]=a.valueTo,t[n+"transition-property"]=a.property,t[n+"transition-duration"]=a.duration+"ms",t[n+"transition-timing-function"]=a.timing,f.css(t);if(a.callback){var r=setTimeout(a.callback.bind(f),a.duration);f.data("cssAnimationCallback",r)}e=null,a=null},0),this},u=function(){function t(t){var n=null;e.lastIndex=0;for(;;){var r=e.exec(t);if(!r)return n;(n||(n={}))[r[1]]=r[0]}}function n(e){var t=Object.keys(e).sort().reverse();for(var n=0;n<t.length;n++)t[n]=e[t[n]];return t.join(" ")}var e=/([\w]+)\([^\)]+\)/g;return Class({Construct:function(){this.transforms={}},handle:function(e){var r=t(e.from),i=t(e.to),s=null;if(r){for(s in this.transforms)s in r==0&&(r[s]=this.transforms[s]);e.from=n(r);for(s in r)this.transforms[s]=r[s]}for(s in this.transforms)s in i==0&&(i[s]=this.transforms[s]);e.to=n(i);for(s in i)this.transforms[s]=i[s]}})}(),a=function(){function t(t){var r=t.split(/ *\| */g),i={},s=r.length;i.prop=r[0]in e?n+r[0]:r[0];var o=r[1].split(/ *> */);o[0]&&(i.from=o[0]),i.to=o[o.length-1];if(s>2){var u=/(\d+m?s)?\s*([a-z]+[^\s]*)?\s*(\d+m?s)?/.exec(r[2]);if(u!=null)return i.duration=u[1]||"200ms",i.timing=u[2]||"linear",i.delay=u[3]||"0",i}return i.duration="200ms",i.timing="linear",i.delay="0",i}var e={transform:null};return Class({Construct:function(e,n){this.parent=n,this.transformModel=n&&n.transformModel||new u;var r=e.model||e;if(r instanceof Array){this.model=[];for(var i=0,s=r.length;i<s;i++)this.model.push(new a(r[i],this))}else r instanceof Object?this.model=[new a(r,this)]:typeof r=="string"&&(this.model=t(r),~this.model.prop.indexOf("transform")&&this.transformModel.handle(this.model));e.next!=null&&(this.next=new a(e.next,this)),this.state=0,this.modelCount=this.model instanceof Array?this.model.length:1,this.nextCount=0},reset:function(){this.state=0,this.modelCount=this.model instanceof Array?this.model.length:1,this.nextCount=0,this.next!=null&&(this.nextCount=this.next instanceof Array?this.next.length:1);var e=this.model instanceof Array,t=e?this.model.length:1,n=null;for(var r=0;e?r<t:r<1;r++)n=e?this.model[r]:this.model,n.reset&&n.reset()},getNext:function(){if(this.state===0)return this.state=1,this;this.state==1&&this.modelCount>0&&--this.modelCount;if(this.state==1&&this.modelCount===0){this.state=2;if(this.next)return this.next}return this.state==2&&this.nextCount>0&&--this.nextCount,this.state==2&&this.nextCount===0&&this.parent?this.parent.getNext&&this.parent.getNext():null}})}(),f=Class({Construct:function(){this.arr=[]},put:function(e){if(e==null)return!1;var n=e.getNext(),r=!1,i,s;if(n==null)return!1;if(n instanceof Array){for(s=0,i=n.length;s<i;s++)this.put(n[s])===!0&&(t=!0);return t}if(n.model instanceof Array){t=!1;for(s=0,i=n.model.length;s<i;s++)this.put(n.model[s])===!0&&(t=!0);return t}return n.state===0&&(n.state=1),this.arr.push(n),!0},resolve:function(e){for(var t=0,n,r=this.arr.length;t<r;t++){n=this.arr[t];if(n.model.prop==e)return this.arr.splice(t,1),this.put(n)}return!1},getCss:function(e,t){var n,r,i,o;for(n=0,r=this.arr.length;n<r;n++){o=this.arr[n],"from"in o.model&&(e[o.model.prop]=o.model.from),t[o.model.prop]=o.model.to;for(i in s)(t[s[i]]||(t[s[i]]=[])).push(o.model[i])}for(i in s)t[s[i]]=t[s[i]].join(",")},clear:function(){this.arr=[]}}),l=Class({Construct:function(e){this.stack=new f,this.model=new a(e),this.transitionEnd=this.transitionEnd.bind(this)},start:function(e,t){this.onComplete=t;var n={},r={};this.model.reset(),this.stack.clear(),this.stack.put(this.model),this.stack.getCss(n,r),e.addEventListener(i(),this.transitionEnd,!1),this.element=e,this.apply(n,r)},transitionEnd:function(e){if(this.stack.resolve(e.propertyName)===!0){var t={},n={};this.stack.getCss(t,n),this.apply(t,n)}else this.stack.arr.length<1&&(this.element.removeEventListener(i(),this.transitionEnd,!1),this.onComplete&&this.onComplete())},apply:function(e,t){e[n+"transition"]="none";var r=this.element.style;if(e!=null)for(var i in e)r.setProperty(i,e[i],"");setTimeout(function(){for(var e in t)r.setProperty(e,t[e],"")},0)}}),c=function(){var e={},t=null,n=function(){t={keyframes:"@"+r+"keyframes",AnimationIterationCount:r+"AnimationIterationCount",AnimationDuration:r+"AnimationDuration",AnimationTimingFunction:r+"AnimationTimingFunction",AnimationFillMode:r+"AnimationFillMode",AnimationName:r+"AnimationName"}};return{create:function(r){t==null&&n();if(e[r.id]==null){var i=document.styleSheets[0].insertRule(t.keyframes+" "+r.id+" {}",0),s=document.styleSheets[0].cssRules[i],o=r.frames-(r.frameStart||0),u=100/o|0,a=r.property||"background-position-x";for(var f=0;f<o;f++){var l=u*(f+1)+"% { "+a+": "+ -r.frameWidth*(f+(r.frameStart||0))+"px}";s.insertRule(l)}s.iterationCount=r.iterationCount,s.frameToStop=r.frameToStop,e[r.id]=s}},start:function(n,r,i){var s=n.get(0).style;s[t.AnimationName]="none",setTimeout(function(){var o=e[r];if(s[t.AnimationFillMode]=="forwards"){c.stop(n);return}n.on(t+"AnimationEnd",function(){var e;if(o.frameToStop){var t=o.cssRules[o.cssRules.length-1].style;e={};for(var r=0;r<t.length;r++)e[t[r]]=t[t[r]]}c.stop(n,e)}),s[t.AnimationIterationCount]=o.iterationCount||1,s[t.AnimationDuration]=o.cssRules.length*i+"ms",s[t.AnimationTimingFunction]="step-start",s[t.AnimationFillMode]=o.frameToStop?"forwards":"none",s[t.AnimationName]=r},0)},stop:function(e,n){var r=e.get(0).style;r[t.AnimationFillMode]="none",r[t.AnimationName]="",n!=null&&e.css(n)}}}();t.animate=o,t.animate.Model=l,t.animate.sprite=c});